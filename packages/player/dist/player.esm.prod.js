function t(t,e,n,i){return new(n||(n=Promise))((function(r,a){function s(t){try{l(i.next(t))}catch(t){a(t)}}function o(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(s,o)}l((i=i.apply(t,e||[])).next())}))}class e{constructor(){this.createNodeId=()=>e.nodeId++,this.init()}init(){this.nodeMap=new Map,this.idMap=new WeakMap}reset(){this.nodeMap.clear()}getNode(t){return this.nodeMap.get(t)||null}addNode(t,e=this.createNodeId()){return this.idMap.set(t,e),this.nodeMap.set(e,t),e}removeNode(t){this.nodeMap.delete(t),this.idMap.delete(this.getNode(t))}getNodeId(t){return this.idMap.get(t)}updateNode(t,e){this.idMap.set(e,t),this.nodeMap.set(t,e)}}e.nodeId=1;const n=new e;var i,r,a,s;!function(t){t[t.HEAD=0]="HEAD",t[t.SNAPSHOT=1]="SNAPSHOT",t[t.WINDOW=2]="WINDOW",t[t.SCROLL=3]="SCROLL",t[t.MOUSE=4]="MOUSE",t[t.DOM=5]="DOM",t[t.FORM_EL=6]="FORM_EL",t[t.LOCATION=7]="LOCATION",t[t.AUDIO=8]="AUDIO",t[t.CANVAS=9]="CANVAS",t[t.TERMINATE=10]="TERMINATE"}(i||(i={})),function(t){t[t.PROP=0]="PROP",t[t.INPUT=1]="INPUT",t[t.CHANGE=2]="CHANGE",t[t.FOCUS=3]="FOCUS",t[t.BLUR=4]="BLUR"}(r||(r={})),function(t){t[t.MOVE=0]="MOVE",t[t.CLICK=1]="CLICK"}(a||(a={})),function(t){t.READONLY="readonly",t.READWRITE="readwrite",t.VERSIONCHANGE="versionchange"}(s||(s={}));class o{constructor(t,e,n,i){this.listeners=[],this.DBName=t,this.version=e,this.storeName=n;const r=window.indexedDB.open(t,e);r.onerror=()=>{console.error("open indexedDB on error")},r.onsuccess=()=>{this.db=r.result,i(this.db)},r.onupgradeneeded=t=>{const e=t.target.result;if(!e.objectStoreNames.contains(n)){const t=e.createObjectStore(n,{autoIncrement:!0,keyPath:"id"});t.createIndex("type","type",{unique:!1}),t.createIndex("data","data",{unique:!1}),t.createIndex("relatedId","relatedId",{unique:!1}),t.createIndex("time","time",{unique:!1})}}}withIDBStore(t){return new Promise((e,n)=>{const i=this.db.transaction(this.storeName,t);i.oncomplete=()=>{},i.onabort=i.onerror=()=>{throw n(i.error),new Error("process indexedDB on error")},e(i.objectStore(this.storeName))})}getStore(){return this.withIDBStore(s.READWRITE)}add(e){return t(this,void 0,void 0,(function*(){(yield this.getStore()).add(e),this.triggerEvent("add")}))}addRecord(e){return t(this,void 0,void 0,(function*(){yield this.add(e)}))}clear(){return t(this,void 0,void 0,(function*(){(yield this.getStore()).clear()}))}readAllRecords(){return t(this,void 0,void 0,(function*(){return yield this.readRecords()}))}readRecords(e){return t(this,void 0,void 0,(function*(){const{limit:t}=e||{},n=yield this.getStore(),i=[];return new Promise(e=>{n.openCursor().onsuccess=n=>{const r=n.target.result;return t&&i.length>=t?e(i):r?(i.push(r.value),void r.continue()):void e(i)}}).then(t=>t.length?t:null)}))}deleteRecords(e){return t(this,void 0,void 0,(function*(){const{lowerBound:t,upperBound:n}=e||{};if(t&&n){const e=IDBKeyRange.bound(t,n);(yield this.getStore()).delete(e)}}))}count(){return t(this,void 0,void 0,(function*(){const t=yield this.getStore();return new Promise(e=>{t.count().onsuccess=t=>{e(t.target.result)}})}))}triggerEvent(t){this.listeners.filter(e=>e.name===t).forEach(t=>t.fn())}listen(t,e){this.listeners.push({name:t,fn:e})}}const l=new Promise(t=>{const e=new o("cat_db",1,"cat_data",()=>{t(e)})});function d(t,e){return t(e={exports:{}},e.exports),e.exports}const h={BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BASE_URL:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};const c=new class{atob(t,e="BASE_URL"){if(1===t.length)return this.decode(t,e);const n=h[e].length;let i=0,r=0;for(let a=t.length-1;a>=0;a--){i+=this.decode(t[a],e)*Math.pow(n,r++)}return i}btoa(t,e="BASE_URL"){const n=h[e].length;return t<n?this.encode(t,e):""+this.btoa(Math.floor(t/n),e)+this.encode(t&n-1,e)}decode(t,e){return h[e].indexOf(t)}encode(t,e){return h[e][t&h.BASE.length-1]}};const u=function(t){const e=t.message||t;return console.error("TimeCat Error: "+e),e};function f(){return Math.floor(performance.timing.navigationStart+performance.now())}function p(){return c.btoa(f())}function m(t=8){return(20*Math.random()+16).toString(36).substring(2,t+2).toUpperCase()}function g(t){const e=t.split(":");if(2===e.length){const[t,n]=e;return 1e3*(60*+t+ +n)}const[n,i,r]=e;return 1e3*(3600*+n+60*+i+ +r)}function b(t){return t.type===i.SNAPSHOT&&!t.data.frameId}function _(t){const e=[];let n,r;return t.forEach((a,s)=>{const o=t[s+1];switch(a.type){case i.HEAD:const t=a.data,s=n&&n.head;if(s&&t.href===s.href)break;n={head:t,body:[]},o&&!o.data.frameId&&n&&e.push(n);break;case i.SNAPSHOT:a.data.frameId?r.records.push(a):(r={snapshot:a,records:[],audio:{src:"",bufferStrList:[],subtitles:[],opts:{}}},r&&n&&n.body.push(r));break;case i.AUDIO:if("base64"===a.data.type){r.audio.bufferStrList.push(...a.data.data)}else r.audio.opts=a.data.data;break;default:r.records.push(a)}}),e}function w(e=200){return t(this,void 0,void 0,(function*(){return new Promise(t=>{setTimeout(()=>t(),e)})}))}function v(t){return!!t.tag}function y(t,e){const n=document.createElement("a");n.download=e,"string"==typeof t?(n.href=t,n.click()):(n.href=URL.createObjectURL(t),n.click(),URL.revokeObjectURL(n.href))}const x=new class{constructor(){const t=document.createElement("iframe");t.style.display="none",t.style.visibility="hidden",document.body.appendChild(t),this.safeWindow=t.contentWindow}getObjByPath(t,e){if(!t)return e;const n=this.getMethodAtPath(t);let i=e;return n.forEach(t=>{i=i[t]}),i}getMethodAtPath(t){return t.split(".")}recoverMethod(t){const e=this.getObjByPath(t,window);if(!this.isNative(e)){const e=this.getObjByPath(t,this.safeWindow);this.recover(t,e)}}recover(t,e){const n=this.getMethodAtPath(t),[i,...r]=n.reverse();this.getObjByPath(r.reverse().join("."),window)[i]=e}isNative(t){const e=Object.prototype.toString,n=Function.prototype.toString,i=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\/\\]/g,"\\$&").replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),r=typeof t;return"function"==r?i.test(n.call(t)):t&&"object"==r&&/^\[object .+?Constructor\]$/.test(e.call(t))||!1}};x.recoverMethod("MutationObserver");const k=()=>(window.G_REPLAY_DATA&&window.G_REPLAY_DATA.snapshot.data).href;function E(t,e){return t.replace(/(url\(['"]?((\/{1,2}|\.\.?\/)[^'"]*?)['"]?(?=\)))/g,(t,n,i)=>{if(!i.startsWith("data")){const n=(null==e?void 0:e.attrs["css-url"])||k(),r=new URL(i,n);return t.replace(i,r.href)}return t})}function S(t,e){return t.startsWith("data")?t:(e&&setTimeout(()=>{const n=e.getRootNode().defaultView,{href:i,path:r}=(null==n?void 0:n.G_REPLAY_LOCATION)||{};if(r&&i){const n=new URL(r,i);e.getAttributeNames().filter(t=>~["src","href"].indexOf(t)).forEach(i=>{const r=new URL(t,n).href;e.getAttribute(i)!==r&&e.setAttribute(i,r)})}}),new URL(t,k()).href)}function A(e){return t(this,void 0,void 0,(function*(){if(!e)return!1;if(e.length>500)return!1;const t=S(e);if(function(t){try{new URL(t)}catch(t){return!1}return!0}(t))try{return yield T(t)}catch(t){return!1}return!1}))}function T(e){return t(this,void 0,void 0,(function*(){return yield fetch(e).then(e=>t(this,void 0,void 0,(function*(){return(yield e.text()).replace(/<\/script>/g,"<\\/script>")})))}))}const O=".pacman-box{margin:0 auto;display:flex;vertical-align:middle;height:100vh;flex:0 1 auto;flex-direction:column;flex-grow:1;flex-shrink:0;flex-basis:25%;max-width:25%;align-items:center;justify-content:center}.pacman>div:first-of-type,.pacman>div:nth-child(2){width:0;height:0;border-right:25px solid transparent;border-top:25px solid grey;border-left:25px solid grey;border-bottom:25px solid grey;border-radius:25px;position:relative;left:-30px}@-webkit-keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@-webkit-keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}@keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}.pacman{transform: translateX(30px);position:relative}.pacman>div:nth-child(3){-webkit-animation:pacman-balls 1s -.66s infinite linear;animation:pacman-balls 1s -.66s infinite linear}.pacman>div:nth-child(4){-webkit-animation:pacman-balls 1s -.33s infinite linear;animation:pacman-balls 1s -.33s infinite linear}.pacman>div:nth-child(5){-webkit-animation:pacman-balls 1s 0s infinite linear;animation:pacman-balls 1s 0s infinite linear}.pacman>div:first-of-type{-webkit-animation:rotate_pacman_half_up .5s 0s infinite;animation:rotate_pacman_half_up .5s 0s infinite}.pacman>div:nth-child(2){-webkit-animation:rotate_pacman_half_down .5s 0s infinite;animation:rotate_pacman_half_down .5s 0s infinite;margin-top:-50px}.pacman>div:nth-child(3),.pacman>div:nth-child(4),.pacman>div:nth-child(5),.pacman>div:nth-child(6){background-color:grey;border-radius:100%;margin:2px;width:10px;height:10px;position:absolute;-webkit-transform:translate(0,-6.25px);transform:translate(0,-6.25px);top:25px;left:70px}";var R=d((function(t,e){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var a=0;a<i;a++)t[r+a]=e[n+a]},flattenChunks:function(t){var e,n,i,r,a,s;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s.set(a=t[e],r),r+=a.length;return s}},a={arraySet:function(t,e,n,i,r){for(var a=0;a<i;a++)t[r+a]=e[n+a]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(n)}));function z(t){for(var e=t.length;--e>=0;)t[e]=0}var I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(576);z(C);var B=new Array(60);z(B);var P=new Array(512);z(P);var M=new Array(256);z(M);var F=new Array(29);z(F);var U,j,H,Y=new Array(30);function Z(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function G(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function V(t){return t<256?P[t]:P[256+(t>>>7)]}function K(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function W(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,K(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function q(t,e,n){W(t,n[2*e],n[2*e+1])}function X(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function J(t,e,n){var i,r,a=new Array(16),s=0;for(i=1;i<=15;i++)a[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=X(a[o]++,o))}}function Q(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function $(t){t.bi_valid>8?K(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function tt(t,e,n,i){var r=2*e,a=2*n;return t[r]<t[a]||t[r]===t[a]&&i[e]<=i[n]}function et(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&tt(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!tt(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function nt(t,e,n){var i,r,a,s,o=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],r=t.pending_buf[t.l_buf+o],o++,0===i?q(t,r,e):(q(t,(a=M[r])+256+1,e),0!==(s=I[a])&&W(t,r-=F[a],s),q(t,a=V(--i),n),0!==(s=N[a])&&W(t,i-=Y[a],s))}while(o<t.last_lit);q(t,256,e)}function it(t,e){var n,i,r,a=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,d=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<l;n++)0!==a[2*n]?(t.heap[++t.heap_len]=d=n,t.depth[n]=0):a[2*n+1]=0;for(;t.heap_len<2;)a[2*(r=t.heap[++t.heap_len]=d<2?++d:0)]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=s[2*r+1]);for(e.max_code=d,n=t.heap_len>>1;n>=1;n--)et(t,a,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],et(t,a,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,a[2*r]=a[2*n]+a[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,a[2*n+1]=a[2*i+1]=r,t.heap[1]=r++,et(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,a,s,o,l=e.dyn_tree,d=e.max_code,h=e.stat_desc.static_tree,c=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(a=0;a<=15;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(a=l[2*l[2*(i=t.heap[n])+1]+1]+1)>p&&(a=p,m++),l[2*i+1]=a,i>d||(t.bl_count[a]++,s=0,i>=f&&(s=u[i-f]),t.opt_len+=(o=l[2*i])*(a+s),c&&(t.static_len+=o*(h[2*i+1]+s)));if(0!==m){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--)for(i=t.bl_count[a];0!==i;)(r=t.heap[--n])>d||(l[2*r+1]!==a&&(t.opt_len+=(a-l[2*r+1])*l[2*r],l[2*r+1]=a),i--)}}(t,e),J(a,d,t.bl_count)}function rt(t,e,n){var i,r,a=-1,s=e[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++o<l&&r===s||(o<d?t.bl_tree[2*r]+=o:0!==r?(r!==a&&t.bl_tree[2*r]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,a=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4))}function at(t,e,n){var i,r,a=-1,s=e[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++o<l&&r===s)){if(o<d)do{q(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(q(t,r,t.bl_tree),o--),q(t,16,t.bl_tree),W(t,o-3,2)):o<=10?(q(t,17,t.bl_tree),W(t,o-3,3)):(q(t,18,t.bl_tree),W(t,o-11,7));o=0,a=r,0===s?(l=138,d=3):r===s?(l=6,d=3):(l=7,d=4)}}z(Y);var st=!1;function ot(t,e,n,i){W(t,0+(i?1:0),3),function(t,e,n,i){$(t),i&&(K(t,n),K(t,~n)),R.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}var lt={_tr_init:function(t){st||(!function(){var t,e,n,i,r,a=new Array(16);for(n=0,i=0;i<28;i++)for(F[i]=n,t=0;t<1<<I[i];t++)M[n++]=i;for(M[n-1]=i,r=0,i=0;i<16;i++)for(Y[i]=r,t=0;t<1<<N[i];t++)P[r++]=i;for(r>>=7;i<30;i++)for(Y[i]=r<<7,t=0;t<1<<N[i]-7;t++)P[256+r++]=i;for(e=0;e<=15;e++)a[e]=0;for(t=0;t<=143;)C[2*t+1]=8,t++,a[8]++;for(;t<=255;)C[2*t+1]=9,t++,a[9]++;for(;t<=279;)C[2*t+1]=7,t++,a[7]++;for(;t<=287;)C[2*t+1]=8,t++,a[8]++;for(J(C,287,a),t=0;t<30;t++)B[2*t+1]=5,B[2*t]=X(t,5);U=new Z(C,I,257,286,15),j=new Z(B,N,0,30,15),H=new Z(new Array(0),D,0,19,7)}(),st=!0),t.l_desc=new G(t.dyn_ltree,U),t.d_desc=new G(t.dyn_dtree,j),t.bl_desc=new G(t.bl_tree,H),t.bi_buf=0,t.bi_valid=0,Q(t)},_tr_stored_block:ot,_tr_flush_block:function(t,e,n,i){var r,a,s=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),it(t,t.l_desc),it(t,t.d_desc),s=function(t){var e;for(rt(t,t.dyn_ltree,t.l_desc.max_code),rt(t,t.dyn_dtree,t.d_desc.max_code),it(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*L[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),(a=t.static_len+3+7>>>3)<=(r=t.opt_len+3+7>>>3)&&(r=a)):r=a=n+5,n+4<=r&&-1!==e?ot(t,e,n,i):4===t.strategy||a===r?(W(t,2+(i?1:0),3),nt(t,C,B)):(W(t,4+(i?1:0),3),function(t,e,n,i){var r;for(W(t,e-257,5),W(t,n-1,5),W(t,i-4,4),r=0;r<i;r++)W(t,t.bl_tree[2*L[r]+1],3);at(t,t.dyn_ltree,e-1),at(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),nt(t,t.dyn_ltree,t.dyn_dtree)),Q(t),i&&$(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(M[n]+256+1)]++,t.dyn_dtree[2*V(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){W(t,2,3),q(t,256,C),function(t){16===t.bi_valid?(K(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}};var dt=function(t,e,n,i){for(var r=65535&t|0,a=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{a=a+(r=r+e[i++]|0)|0}while(--s);r%=65521,a%=65521}return r|a<<16|0};var ht=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();var ct,ut=function(t,e,n,i){var r=ht,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},ft={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function pt(t,e){return t.msg=ft[e],e}function mt(t){return(t<<1)-(t>4?9:0)}function gt(t){for(var e=t.length;--e>=0;)t[e]=0}function bt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(R.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function _t(t,e){lt._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,bt(t.strm)}function wt(t,e){t.pending_buf[t.pending++]=e}function vt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function yt(t,e){var n,i,r=t.max_chain_length,a=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,d=t.window,h=t.w_mask,c=t.prev,u=t.strstart+258,f=d[a+s-1],p=d[a+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(d[(n=e)+s]===p&&d[n+s-1]===f&&d[n]===d[a]&&d[++n]===d[a+1]){a+=2,n++;do{}while(d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&d[++a]===d[++n]&&a<u);if(i=258-(u-a),a=u-258,i>s){if(t.match_start=e,s=i,i>=o)break;f=d[a+s-1],p=d[a+s]}}}while((e=c[e&h])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function xt(t){var e,n,i,r,a,s,o,l,d,h,c=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=c+(c-262)){R.arraySet(t.window,t.window,c,c,0),t.match_start-=c,t.strstart-=c,t.block_start-=c,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=c?i-c:0}while(--n);e=n=c;do{i=t.prev[--e],t.prev[e]=i>=c?i-c:0}while(--n);r+=c}if(0===t.strm.avail_in)break;if(o=t.window,l=t.strstart+t.lookahead,h=void 0,(h=(s=t.strm).avail_in)>(d=r)&&(h=d),n=0===h?0:(s.avail_in-=h,R.arraySet(o,s.input,s.next_in,h,l),1===s.state.wrap?s.adler=dt(s.adler,o,h,l):2===s.state.wrap&&(s.adler=ut(s.adler,o,h,l)),s.next_in+=h,s.total_in+=h,h),t.lookahead+=n,t.lookahead+t.insert>=3)for(t.ins_h=t.window[a=t.strstart-t.insert],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+3-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function kt(t,e){for(var n,i;;){if(t.lookahead<262){if(xt(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=yt(t,n)),t.match_length>=3)if(i=lt._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=lt._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}function Et(t,e){for(var n,i,r;;){if(t.lookahead<262){if(xt(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=yt(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=lt._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(_t(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=lt._tr_tally(t,0,t.window[t.strstart-1]))&&_t(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=lt._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}function St(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(1146),this.dyn_dtree=new R.Buf16(122),this.bl_tree=new R.Buf16(78),gt(this.dyn_ltree),gt(this.dyn_dtree),gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(16),this.heap=new R.Buf16(573),gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(573),gt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Tt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,lt._tr_init(e),0):pt(t,-2)}function Ot(t){var e,n=Tt(t);return 0===n&&((e=t.state).window_size=2*e.w_size,gt(e.head),e.max_lazy_match=ct[e.level].max_lazy,e.good_match=ct[e.level].good_length,e.nice_match=ct[e.level].nice_length,e.max_chain_length=ct[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n}function Rt(t,e,n,i,r,a){if(!t)return-2;var s=1;if(-1===e&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||8!==n||i<8||i>15||e<0||e>9||a<0||a>4)return pt(t,-2);8===i&&(i=9);var o=new At;return t.state=o,o.strm=t,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new R.Buf8(2*o.w_size),o.head=new R.Buf16(o.hash_size),o.prev=new R.Buf16(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new R.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=a,o.method=n,Ot(t)}ct=[new St(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(xt(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,_t(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(_t(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&_t(t,!1),1)})),new St(4,4,8,4,kt),new St(4,5,16,8,kt),new St(4,6,32,32,kt),new St(4,4,16,16,Et),new St(8,16,32,32,Et),new St(8,16,128,128,Et),new St(8,32,128,256,Et),new St(32,128,258,1024,Et),new St(32,258,258,4096,Et)];var zt={deflateInit:function(t,e){return Rt(t,e,8,15,8,0)},deflateInit2:Rt,deflateReset:Ot,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},deflate:function(t,e){var n,i,r,a;if(!t||!t.state||e>5||e<0)return t?pt(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return pt(t,0===t.avail_out?-5:-2);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,wt(i,31),wt(i,139),wt(i,8),i.gzhead?(wt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),wt(i,255&i.gzhead.time),wt(i,i.gzhead.time>>8&255),wt(i,i.gzhead.time>>16&255),wt(i,i.gzhead.time>>24&255),wt(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),wt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(wt(i,255&i.gzhead.extra.length),wt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=ut(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(wt(i,0),wt(i,0),wt(i,0),wt(i,0),wt(i,0),wt(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),wt(i,3),i.status=113);else{var s=8+(i.w_bits-8<<4)<<8;s|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(s|=32),s+=31-s%31,i.status=113,vt(i,s),0!==i.strstart&&(vt(i,t.adler>>>16),vt(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(t.adler=ut(t.adler,i.pending_buf,i.pending-r,r)),bt(t),r=i.pending,i.pending!==i.pending_buf_size));)wt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(t.adler=ut(t.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=ut(t.adler,i.pending_buf,i.pending-r,r)),bt(t),r=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,wt(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>r&&(t.adler=ut(t.adler,i.pending_buf,i.pending-r,r)),0===a&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(t.adler=ut(t.adler,i.pending_buf,i.pending-r,r)),bt(t),r=i.pending,i.pending===i.pending_buf_size)){a=1;break}a=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,wt(i,a)}while(0!==a);i.gzhead.hcrc&&i.pending>r&&(t.adler=ut(t.adler,i.pending_buf,i.pending-r,r)),0===a&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&bt(t),i.pending+2<=i.pending_buf_size&&(wt(i,255&t.adler),wt(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(bt(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&mt(e)<=mt(n)&&4!==e)return pt(t,-5);if(666===i.status&&0!==t.avail_in)return pt(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var o=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(xt(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=lt._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,i,r,a,s=t.window;;){if(t.lookahead<=258){if(xt(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=s[r=t.strstart-1])===s[++r]&&i===s[++r]&&i===s[++r]){a=t.strstart+258;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);t.match_length=258-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=lt._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=lt._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(_t(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(_t(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(_t(t,!1),0===t.strm.avail_out)?1:2}(i,e):ct[i.level].func(i,e);if(3!==o&&4!==o||(i.status=666),1===o||3===o)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===o&&(1===e?lt._tr_align(i):5!==e&&(lt._tr_stored_block(i,0,0,!1),3===e&&(gt(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),bt(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(wt(i,255&t.adler),wt(i,t.adler>>8&255),wt(i,t.adler>>16&255),wt(i,t.adler>>24&255),wt(i,255&t.total_in),wt(i,t.total_in>>8&255),wt(i,t.total_in>>16&255),wt(i,t.total_in>>24&255)):(vt(i,t.adler>>>16),vt(i,65535&t.adler)),bt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},deflateEnd:function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?pt(t,-2):(t.state=null,113===e?pt(t,-3):0):-2},deflateSetDictionary:function(t,e){var n,i,r,a,s,o,l,d,h=e.length;if(!t||!t.state)return-2;if(2===(a=(n=t.state).wrap)||1===a&&42!==n.status||n.lookahead)return-2;for(1===a&&(t.adler=dt(t.adler,e,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(gt(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new R.Buf8(n.w_size),R.arraySet(d,e,h-n.w_size,n.w_size,0),e=d,h=n.w_size),s=t.avail_in,o=t.next_in,l=t.input,t.avail_in=h,t.next_in=0,t.input=e,xt(n);n.lookahead>=3;){i=n.strstart,r=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=2,xt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=o,t.input=l,t.avail_in=s,n.wrap=a,0},deflateInfo:"pako deflate (from Nodeca project)"},It=!0,Nt=!0;try{String.fromCharCode.apply(null,[0])}catch(t){It=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Nt=!1}for(var Dt=new R.Buf8(256),Lt=0;Lt<256;Lt++)Dt[Lt]=Lt>=252?6:Lt>=248?5:Lt>=240?4:Lt>=224?3:Lt>=192?2:1;Dt[254]=Dt[254]=1;function Ct(t,e){if(e<65534&&(t.subarray&&Nt||!t.subarray&&It))return String.fromCharCode.apply(null,R.shrinkBuf(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}var Bt=function(t){var e,n,i,r,a,s=t.length,o=0;for(r=0;r<s;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),o+=n<128?1:n<2048?2:n<65536?3:4;for(e=new R.Buf8(o),a=0,r=0;a<o;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},Pt=function(t){return Ct(t,t.length)},Mt=function(t){for(var e=new R.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},Ft=function(t,e){var n,i,r,a,s=e||t.length,o=new Array(2*s);for(i=0,n=0;n<s;)if((r=t[n++])<128)o[i++]=r;else if((a=Dt[r])>4)o[i++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&n<s;)r=r<<6|63&t[n++],a--;a>1?o[i++]=65533:r<65536?o[i++]=r:(o[i++]=55296|(r-=65536)>>10&1023,o[i++]=56320|1023&r)}return Ct(o,i)},Ut=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+Dt[t[n]]>e?n:e};var jt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString;function Yt(t){if(!(this instanceof Yt))return new Yt(t);this.options=R.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jt,this.strm.avail_out=0;var n=zt.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(ft[n]);if(e.header&&zt.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"==typeof e.dictionary?Bt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=zt.deflateSetDictionary(this.strm,i)))throw new Error(ft[n]);this._dict_set=!0}}function Zt(t,e){var n=new Yt(e);if(n.push(t,!0),n.err)throw n.msg||ft[n.err];return n.result}Yt.prototype.push=function(t,e){var n,i,r=this.strm,a=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:!0===e?4:0,r.input="string"==typeof t?Bt(t):"[object ArrayBuffer]"===Ht.call(t)?new Uint8Array(t):t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new R.Buf8(a),r.next_out=0,r.avail_out=a),1!==(n=zt.deflate(r,i))&&0!==n)return this.onEnd(n),this.ended=!0,!1;0!==r.avail_out&&(0!==r.avail_in||4!==i&&2!==i)||this.onData("string"===this.options.to?Pt(R.shrinkBuf(r.output,r.next_out)):R.shrinkBuf(r.output,r.next_out))}while((r.avail_in>0||0===r.avail_out)&&1!==n);return 4===i?(n=zt.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==i||(this.onEnd(0),r.avail_out=0,!0)},Yt.prototype.onData=function(t){this.chunks.push(t)},Yt.prototype.onEnd=function(t){0===t&&(this.result="string"===this.options.to?this.chunks.join(""):R.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Gt={Deflate:Yt,deflate:Zt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Zt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Zt(t,e)}},Vt=function(t,e){var n,i,r,a,s,o,l,d,h,c,u,f,p,m,g,b,_,w,v,y,x,k,E,S,A;S=t.input,r=(i=t.next_in)+(t.avail_in-5),A=t.output,s=(a=t.next_out)-(e-t.avail_out),o=a+(t.avail_out-257),l=(n=t.state).dmax,d=n.wsize,h=n.whave,c=n.wnext,u=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{p<15&&(f+=S[i++]<<p,f+=S[i++]<<(p+=8),p+=8),w=m[f&b];e:for(;;){if(f>>>=v=w>>>24,p-=v,0===(v=w>>>16&255))A[a++]=65535&w;else{if(!(16&v)){if(0==(64&v)){w=m[(65535&w)+(f&(1<<v)-1)];continue e}if(32&v){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}y=65535&w,(v&=15)&&(p<v&&(f+=S[i++]<<p,p+=8),y+=f&(1<<v)-1,f>>>=v,p-=v),p<15&&(f+=S[i++]<<p,f+=S[i++]<<(p+=8),p+=8),w=g[f&_];n:for(;;){if(f>>>=v=w>>>24,p-=v,!(16&(v=w>>>16&255))){if(0==(64&v)){w=g[(65535&w)+(f&(1<<v)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&w,p<(v&=15)&&(f+=S[i++]<<p,(p+=8)<v&&(f+=S[i++]<<p,p+=8)),(x+=f&(1<<v)-1)>l){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=v,p-=v,x>(v=a-s)){if((v=x-v)>h&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=0,E=u,0===c){if(k+=d-v,v<y){y-=v;do{A[a++]=u[k++]}while(--v);k=a-x,E=A}}else if(c<v){if(k+=d+c-v,(v-=c)<y){y-=v;do{A[a++]=u[k++]}while(--v);if(k=0,c<y){y-=v=c;do{A[a++]=u[k++]}while(--v);k=a-x,E=A}}}else if(k+=c-v,v<y){y-=v;do{A[a++]=u[k++]}while(--v);k=a-x,E=A}for(;y>2;)A[a++]=E[k++],A[a++]=E[k++],A[a++]=E[k++],y-=3;y&&(A[a++]=E[k++],y>1&&(A[a++]=E[k++]))}else{k=a-x;do{A[a++]=A[k++],A[a++]=A[k++],A[a++]=A[k++],y-=3}while(y>2);y&&(A[a++]=A[k++],y>1&&(A[a++]=A[k++]))}break}}break}}while(i<r&&a<o);f&=(1<<(p-=(y=p>>3)<<3))-1,t.next_in=i-=y,t.next_out=a,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=a<o?o-a+257:257-(a-o),n.hold=f,n.bits=p},Kt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Wt=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],qt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Xt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Jt=function(t,e,n,i,r,a,s,o){var l,d,h,c,u,f,p,m,g,b=o.bits,_=0,w=0,v=0,y=0,x=0,k=0,E=0,S=0,A=0,T=0,O=null,z=0,I=new R.Buf16(16),N=new R.Buf16(16),D=null,L=0;for(_=0;_<=15;_++)I[_]=0;for(w=0;w<i;w++)I[e[n+w]]++;for(x=b,y=15;y>=1&&0===I[y];y--);if(x>y&&(x=y),0===y)return r[a++]=20971520,r[a++]=20971520,o.bits=1,0;for(v=1;v<y&&0===I[v];v++);for(x<v&&(x=v),S=1,_=1;_<=15;_++)if(S<<=1,(S-=I[_])<0)return-1;if(S>0&&(0===t||1!==y))return-1;for(N[1]=0,_=1;_<15;_++)N[_+1]=N[_]+I[_];for(w=0;w<i;w++)0!==e[n+w]&&(s[N[e[n+w]]++]=w);if(0===t?(O=D=s,f=19):1===t?(O=Kt,z-=257,D=Wt,L-=257,f=256):(O=qt,D=Xt,f=-1),T=0,w=0,_=v,u=a,k=x,E=0,h=-1,c=(A=1<<x)-1,1===t&&A>852||2===t&&A>592)return 1;for(;;){p=_-E,s[w]<f?(m=0,g=s[w]):s[w]>f?(m=D[L+s[w]],g=O[z+s[w]]):(m=96,g=0),l=1<<_-E,v=d=1<<k;do{r[u+(T>>E)+(d-=l)]=p<<24|m<<16|g|0}while(0!==d);for(l=1<<_-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,w++,0==--I[_]){if(_===y)break;_=e[n+s[w]]}if(_>x&&(T&c)!==h){for(0===E&&(E=x),u+=v,S=1<<(k=_-E);k+E<y&&!((S-=I[k+E])<=0);)k++,S<<=1;if(A+=1<<k,1===t&&A>852||2===t&&A>592)return 1;r[h=T&c]=x<<24|k<<16|u-a|0}}return 0!==T&&(r[u+T]=_-E<<24|64<<16|0),o.bits=x,0};function Qt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function $t(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new R.Buf16(320),this.work=new R.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function te(t){var e;return t&&t.state?(t.total_in=t.total_out=(e=t.state).total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new R.Buf32(852),e.distcode=e.distdyn=new R.Buf32(592),e.sane=1,e.back=-1,0):-2}function ee(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,te(t)):-2}function ne(t,e){var n,i;return t&&t.state?(e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==(i=t.state).window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,ee(t))):-2}function ie(t,e){var n,i;return t?(i=new $t,t.state=i,i.window=null,0!==(n=ne(t,e))&&(t.state=null),n):-2}var re,ae,se=!0;function oe(t){if(se){var e;for(re=new R.Buf32(512),ae=new R.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Jt(1,t.lens,0,288,re,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Jt(2,t.lens,0,32,ae,0,t.work,{bits:5}),se=!1}t.lencode=re,t.lenbits=9,t.distcode=ae,t.distbits=5}function le(t,e,n,i){var r,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new R.Buf8(a.wsize)),i>=a.wsize?(R.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((r=a.wsize-a.wnext)>i&&(r=i),R.arraySet(a.window,e,n-i,r,a.wnext),(i-=r)?(R.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0}var de={inflateReset:ee,inflateReset2:ne,inflateResetKeep:te,inflateInit:function(t){return ie(t,15)},inflateInit2:ie,inflate:function(t,e){var n,i,r,a,s,o,l,d,h,c,u,f,p,m,g,b,_,w,v,y,x,k,E,S,A=0,T=new R.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(n=t.state).mode&&(n.mode=13),s=t.next_out,r=t.output,a=t.next_in,i=t.input,d=n.hold,h=n.bits,c=o=t.avail_in,u=l=t.avail_out,k=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,T[0]=255&d,T[1]=d>>>8&255,n.check=ut(n.check,T,2,0),d=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&d)){t.msg="unknown compression method",n.mode=30;break}if(h-=4,x=8+(15&(d>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<x,t.adler=n.check=1,n.mode=512&d?10:12,d=0,h=0;break;case 2:for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(n.flags=d,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,n.check=ut(n.check,T,2,0)),d=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,T[2]=d>>>16&255,T[3]=d>>>24&255,n.check=ut(n.check,T,4,0)),d=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,n.check=ut(n.check,T,2,0)),d=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(T[0]=255&d,T[1]=d>>>8&255,n.check=ut(n.check,T,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>o&&(f=o),f&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),R.arraySet(n.head.extra,i,a,f,x)),512&n.flags&&(n.check=ut(n.check,i,f,a)),o-=f,a+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break t;f=0;do{x=i[a+f++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x))}while(x&&f<o);if(512&n.flags&&(n.check=ut(n.check,i,f,a)),o-=f,a+=f,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break t;f=0;do{x=i[a+f++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x))}while(x&&f<o);if(512&n.flags&&(n.check=ut(n.check,i,f,a)),o-=f,a+=f,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(d!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}t.adler=n.check=Qt(d),d=0,h=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=d,n.bits=h,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){d>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}switch(n.last=1&d,h-=1,3&(d>>>=1)){case 0:n.mode=14;break;case 1:if(oe(n),n.mode=20,6===e){d>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}d>>>=2,h-=2;break;case 14:for(d>>>=7&h,h-=7&h;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&d,d=0,h=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(f=n.length){if(f>o&&(f=o),f>l&&(f=l),0===f)break t;R.arraySet(r,i,a,f,s),o-=f,a+=f,l-=f,s+=f,n.length-=f;break}n.mode=12;break;case 17:for(;h<14;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(n.nlen=257+(31&d),h-=5,n.ndist=1+(31&(d>>>=5)),h-=5,n.ncode=4+(15&(d>>>=5)),d>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.lens[O[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k=Jt(0,n.lens,0,19,n.lencode,0,n.work,E={bits:n.lenbits}),n.lenbits=E.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;b=(A=n.lencode[d&(1<<n.lenbits)-1])>>>16&255,_=65535&A,!((g=A>>>24)<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(_<16)d>>>=g,h-=g,n.lens[n.have++]=_;else{if(16===_){for(S=g+2;h<S;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(d>>>=g,h-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],f=3+(3&d),d>>>=2,h-=2}else if(17===_){for(S=g+3;h<S;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}h-=g,x=0,f=3+(7&(d>>>=g)),d>>>=3,h-=3}else{for(S=g+7;h<S;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}h-=g,x=0,f=11+(127&(d>>>=g)),d>>>=7,h-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;f--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,k=Jt(1,n.lens,0,n.nlen,n.lencode,0,n.work,E={bits:n.lenbits}),n.lenbits=E.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,k=Jt(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E={bits:n.distbits}),n.distbits=E.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(o>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=d,n.bits=h,Vt(t,u),s=t.next_out,r=t.output,l=t.avail_out,a=t.next_in,i=t.input,o=t.avail_in,d=n.hold,h=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;b=(A=n.lencode[d&(1<<n.lenbits)-1])>>>16&255,_=65535&A,!((g=A>>>24)<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(b&&0==(240&b)){for(w=g,v=b,y=_;b=(A=n.lencode[y+((d&(1<<w+v)-1)>>w)])>>>16&255,_=65535&A,!(w+(g=A>>>24)<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}d>>>=w,h-=w,n.back+=w}if(d>>>=g,h-=g,n.back+=g,n.length=_,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=12;break}if(64&b){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(S=n.extra;h<S;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;b=(A=n.distcode[d&(1<<n.distbits)-1])>>>16&255,_=65535&A,!((g=A>>>24)<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(0==(240&b)){for(w=g,v=b,y=_;b=(A=n.distcode[y+((d&(1<<w+v)-1)>>w)])>>>16&255,_=65535&A,!(w+(g=A>>>24)<=h);){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}d>>>=w,h-=w,n.back+=w}if(d>>>=g,h-=g,n.back+=g,64&b){t.msg="invalid distance code",n.mode=30;break}n.offset=_,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(S=n.extra;h<S;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break t;if(n.offset>(f=u-l)){if((f=n.offset-f)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}p=f>n.wnext?n.wsize-(f-=n.wnext):n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=r,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{r[s++]=m[p++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;r[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===o)break t;o--,d|=i[a++]<<h,h+=8}if(t.total_out+=u-=l,n.total+=u,u&&(t.adler=n.check=n.flags?ut(n.check,r,u,s-u):dt(n.check,r,u,s-u)),u=l,(n.flags?d:Qt(d))!==n.check){t.msg="incorrect data check",n.mode=30;break}d=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===o)break t;o--,d+=i[a++]<<h,h+=8}if(d!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}d=0,h=0}n.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=s,t.avail_out=l,t.next_in=a,t.avail_in=o,n.hold=d,n.bits=h,(n.wsize||u!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&le(t,t.output,t.next_out,u-t.avail_out),u-=t.avail_out,t.total_in+=c-=t.avail_in,t.total_out+=u,n.total+=u,n.wrap&&u&&(t.adler=n.check=n.flags?ut(n.check,r,u,t.next_out-u):dt(n.check,r,u,t.next_out-u)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===u||4===e)&&0===k&&(k=-5),k},inflateEnd:function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},inflateGetHeader:function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?-2:(n.head=e,e.done=!1,0):-2},inflateSetDictionary:function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?-2:11===n.mode&&dt(1,e,i,0)!==n.check?-3:le(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,0):-2},inflateInfo:"pako inflate (from Nodeca project)"},he={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var ce=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},ue=Object.prototype.toString;function fe(t){if(!(this instanceof fe))return new fe(t);this.options=R.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new jt,this.strm.avail_out=0;var n=de.inflateInit2(this.strm,e.windowBits);if(n!==he.Z_OK)throw new Error(ft[n]);if(this.header=new ce,de.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Bt(e.dictionary):"[object ArrayBuffer]"===ue.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=de.inflateSetDictionary(this.strm,e.dictionary))!==he.Z_OK))throw new Error(ft[n])}function pe(t,e){var n=new fe(e);if(n.push(t,!0),n.err)throw n.msg||ft[n.err];return n.result}fe.prototype.push=function(t,e){var n,i,r,a,s,o=this.strm,l=this.options.chunkSize,d=this.options.dictionary,h=!1;if(this.ended)return!1;i=e===~~e?e:!0===e?he.Z_FINISH:he.Z_NO_FLUSH,o.input="string"==typeof t?Mt(t):"[object ArrayBuffer]"===ue.call(t)?new Uint8Array(t):t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new R.Buf8(l),o.next_out=0,o.avail_out=l),(n=de.inflate(o,he.Z_NO_FLUSH))===he.Z_NEED_DICT&&d&&(n=de.inflateSetDictionary(this.strm,d)),n===he.Z_BUF_ERROR&&!0===h&&(n=he.Z_OK,h=!1),n!==he.Z_STREAM_END&&n!==he.Z_OK)return this.onEnd(n),this.ended=!0,!1;o.next_out&&(0!==o.avail_out&&n!==he.Z_STREAM_END&&(0!==o.avail_in||i!==he.Z_FINISH&&i!==he.Z_SYNC_FLUSH)||("string"===this.options.to?(r=Ut(o.output,o.next_out),a=o.next_out-r,s=Ft(o.output,r),o.next_out=a,o.avail_out=l-a,a&&R.arraySet(o.output,o.output,r,a,0),this.onData(s)):this.onData(R.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(h=!0)}while((o.avail_in>0||0===o.avail_out)&&n!==he.Z_STREAM_END);return n===he.Z_STREAM_END&&(i=he.Z_FINISH),i===he.Z_FINISH?(n=de.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===he.Z_OK):i!==he.Z_SYNC_FLUSH||(this.onEnd(he.Z_OK),o.avail_out=0,!0)},fe.prototype.onData=function(t){this.chunks.push(t)},fe.prototype.onEnd=function(t){t===he.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):R.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var me={};(0,R.assign)(me,Gt,{Inflate:fe,inflate:pe,inflateRaw:function(t,e){return(e=e||{}).raw=!0,pe(t,e)},ungzip:pe},he);var ge=me;function be(t,e){const n=function(t,{channelCount:e,sampleBits:n,sampleRate:i}){const r=new ArrayBuffer(44+t.byteLength),a=!0,s=new DataView(r);_e(s,0,"RIFF"),s.setUint32(4,36+2*t.byteLength,a),_e(s,8,"WAVE"),_e(s,12,"fmt "),s.setUint32(16,16,a),s.setUint16(20,1,a),s.setUint16(22,e,a),s.setUint32(24,i,a),s.setUint32(28,i*e*(n/8),a),s.setUint16(32,e*(n/8),a),s.setUint16(34,n,a),_e(s,36,"data"),s.setUint32(40,t.byteLength,a);const o=t.byteLength;let l=44;for(let e=0;e<o;e++)s.setUint8(l,t.getUint8(e)),l++;return s}(function(t,e){const{sampleBits:n}=e,i=new DataView(new ArrayBuffer(t.length*(e.sampleBits/8)));let r=0;if(8===n)for(let e=0;e<t.length;e++,r++){const n=Math.max(-1,Math.min(1,t[e]));let a=n<0?128*n:127*n;a=+a+128,i.setInt8(r,a)}else for(let e=0;e<t.length;e++,r+=2){const n=Math.max(-1,Math.min(1,t[e]));i.setInt16(r,n<0?32768*n:32767*n,!0)}return i}(function(t){const e=new Float32Array(t.length*t[0].length);let n=0;for(let i=0;i<t.length;i++)e.set(t[i],n),n+=t[i].length;return e}(t),e),e);return new Blob([n],{type:"audio/wav"})}function _e(t,e,n){const i=n.length;for(let r=0;r<i;r++)t.setUint8(e+r,n.charCodeAt(r))}function we(t){const e=atob(t),n=e.length,i=new ArrayBuffer(n),r=new DataView(i);for(let t=0;t<n;t++)r.setUint8(t,e.charCodeAt(t));return new Float32Array(i)}const ve={extractAudioDataList:[],opts:{}};function ye(e){return t(this,void 0,void 0,(function*(){["HTMLElement.prototype.appendChild"].forEach(x.recoverMethod.bind(x)),yield function(){return t(this,void 0,void 0,(function*(){const t=yield l;(yield t.count())&&t.add({type:i.TERMINATE,data:null,relatedId:window.G_RECORD_RELATED_ID,time:p()})}))}();const r=(new DOMParser).parseFromString('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no, viewport-fit=cover">\n    <meta http-equiv="Content-Security-Policy-Report-Only" />\n    <title>TimeCat</title>\n</head>\n<body>\n</body>\n</html>\n',"text/html");yield function(e){return t(this,void 0,void 0,(function*(){xe(e,[{src:`const loadingNode = document.createElement('div')\n    loadingNode.className = 'pacman-box';\n    loadingNode.innerHTML = '<style>${O}</style><div class="pacman"><div></div><div></div><div></div><div></div><div></div></div>'\n    loadingNode.setAttribute('style', 'text-align: center;vertical-align: middle;line-height: 100vh;')\n    document.body.insertBefore(loadingNode, document.body.firstChild);window.addEventListener('DOMContentLoaded', () => loadingNode.parentNode.removeChild(loadingNode))`}])}))}(r),yield function(e,r){return t(this,void 0,void 0,(function*(){const a=window.G_REPLAY_PACKS||(yield function(e){return t(this,void 0,void 0,(function*(){const t=yield l,n=yield t.readAllRecords();if(n){return function(t,e){return t.map(t=>(t.body.forEach(t=>(e&&e.audioExternal&&(t.audio=function(t){const e=t.bufferStrList.slice();if(!e.length)return t;const n=`newtouch-audio-${m()}.wav`;return ve.extractAudioDataList.push({source:e,fileName:n}),ve.opts=t.opts,t.src=n,t.bufferStrList.length=0,t}(t.audio)),t)),t))}(_(n),e)}return null}))}(r));if(!a)return;const s=yield function(e){return t(this,void 0,void 0,(function*(){const t=[];e.forEach(e=>{e.body.forEach(e=>{t.push(e)})});const r=[];for(let e=0;e<t.length;e++){const n=t[e],{snapshot:a,records:s}=n,o=[a.data.vNode];let l;for(;l=o.shift();)v(l)&&(ke(l,r),o.push(...l.children));for(let t=0;t<s.length;t++){const e=s[t];if(e.type===i.DOM){const{addedNodes:t}=e.data;if(t)for(let e=0;e<t.length;e++){const n=t[e].node;v(n)&&ke(n,r)}}}}for(const t of r){const{attrs:e}=t,i=e.href;try{const r=new URL(i,location.href).href,a=yield fetch(r).then(t=>t.text()),s={id:n.createNodeId(),type:Node.TEXT_NODE,value:a};delete e.href,Object.keys(e).forEach(t=>{delete e[t]}),t.tag="style",t.attrs.type="text/css",t.attrs["css-url"]=r,t.children.push(s)}catch(t){}}return e}))}(a),o=JSON.stringify(s),d=ge.gzip(o);let h="";for(let t=0;t<d.length;t++){let e=d[t];~[13,34,39,44,60,62,92,96,10,0].indexOf(e)&&(e+=300),h+=String.fromCharCode(e)}xe(e,[{src:`var G_REPLAY_STR_PACKS =  '${h}'`}])}))}(r,e),yield function(e,n){return t(this,void 0,void 0,(function*(){const{scripts:t,autoplay:i}=n,r={autoplay:i},a=t||[];a.some(t=>"timecat-init"===t.name)||a.push({name:"timecat-init",src:`new TimeCat.Player(${JSON.stringify(r)})`}),yield xe(e,a)}))}(r,e),function(t){e=t.documentElement.outerHTML,y(new Blob([e],{type:"text/html"}),`newtouch-${m()}.html`),function(){var t;if(window.G_REPLAY_DATA){const e=window.G_REPLAY_DATA,n=null===(t=null==e?void 0:e.audio)||void 0===t?void 0:t.src;if(n)return void y(n,n)}ve.extractAudioDataList.forEach(t=>{y(be(t.source.map(t=>we(t)),ve.opts),t.fileName)}),ve.extractAudioDataList.length=0}();var e}(r)}))}function xe(e,n){return t(this,void 0,void 0,(function*(){if(n)for(const t of n){const{src:n,name:i}=t;let r=n;const a=document.createElement("script");i&&(a.id=i);/^(chrome-extension|https?):\/\/.+/.test(n)&&(r=yield T(n)),a.text=r,e.body.appendChild(a)}}))}function ke(t,e){const{tag:n,attrs:i}=t;"link"===n&&i.href&&i.href.endsWith(".css")&&e.push(t)}function Ee(t,e,n){if(t.nodeType===Node.ELEMENT_NODE)if("style"!==e){if((!n||"string"!=typeof n||!/\.js$/.test(n))&&/^[\w\-\d]+$/.test(e)&&!/^on\w+$/.test(e)){if(null===n)return t.removeAttribute(e);if(n=String(n),"href"===e&&(n=S(String(n),t)),"background"!==e&&"src"!==e||n.startsWith("data:")||(n=S(String(n),t)),"srcset"===e){const e=n.split(",");n=e.map(e=>S(e.trim(),t)).toString()}return n.startsWith("/")&&(n=S(n,t)),t.setAttribute(e,n)}}else if("string"==typeof n)t.style.cssText=E(n);else if(null!==n&&"object"==typeof n)for(const[e,i]of Object.entries(n))"-"===e[0]?t.style.setProperty(e,i):t.style[e]=i}function Se(t,e){if(null==t)return null;const i=t;if(t.type===Node.COMMENT_NODE)return function(t){const{value:e,id:i}=t,r=document.createComment(e);return n.updateNode(i,r),r}(i);if(t.type===Node.TEXT_NODE)return e&&"style"===e.tag&&(i.value=E(i.value,e)),function(t){const{value:e,id:i}=t,r=document.createTextNode(e);return n.updateNode(i,r),r}(i);const r=t,a=function(t){const{id:e,extra:i}=t,{isSVG:r}=i;let a;const s=(o=t.tag,{script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointLight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"}[o]||o);var o;a=r?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s);return function(t,e){const n=function(t){const e=Object.assign({},t.attrs);"iframe"===t.tag&&(e["disabled-src"]=e.src,delete e.src);return e}(t);for(const[t,i]of Object.entries(n))Ee(e,t,i);"a"===t.tag&&e.setAttribute("target","_blank")}(t,a),function(t,e){const{props:n}=t.extra;if(n)for(const[t,i]of Object.entries(n))if("scroll"===t){const{left:t,top:n}=i;setTimeout(()=>{e.scrollTop=n,e.scrollLeft=t},1e3)}else e[t]=i}(t,a),n.updateNode(e,a),a}(r);return(r.children&&r.children.length||a.childNodes&&a.childNodes.length)&&function(t,e){const n=[];t.children.slice().forEach(i=>{let r=n.pop();r=Se(i,t),r&&(function(t){return!!t&&t.nodeType===Node.COMMENT_NODE&&"hidden"===t.textContent}(e.lastChild)&&Ee(r,"style","visibility: hidden"),e.appendChild(r))})}(r,a),a}function Ae(t,e){const{parentId:i,nextId:r,node:a}=t,s=n.getNode(i);if(!s||!function(t){return t.nodeType===Node.ELEMENT_NODE}(s))return!0;{let t=null;if(r){if(e.has(r))return!0;if(t=(t=>t?n.getNode(t):null)(r),!t)return!0;if(!s.contains(t))return!0}const i=a;let o;"number"==typeof a?(o=n.getNode(a),e.has(a)&&e.delete(a)):o=v(i)?Se(i):function(t){const{type:e,value:i,id:r}=t;let a;switch(e){case Node.TEXT_NODE:a=document.createTextNode(i);break;case Node.COMMENT_NODE:a=document.createComment(i)}return n.updateNode(r,a),a}(i),o&&s.insertBefore(o,t)}}function Te(e){return t(this,void 0,void 0,(function*(){const{type:s,data:o}=e;switch(s){case i.SNAPSHOT:{const t=o,{frameId:e}=t;if(e){const i=n.getNode(e);if(i){const e=i.contentDocument;Re(e,t),ze(e,t)}}break}case i.SCROLL:{const{top:t,left:e,id:i}=o,r=i?n.getNode(i):this.c.sandBoxDoc.documentElement;if(!r)return;const a=Math.abs(t-r.scrollTop)>3*window.G_REPLAY_DATA.snapshot.data.height?"auto":"smooth";r.scroll({top:t,left:e,behavior:a});break}case i.WINDOW:{const{width:t,height:e,id:i}=o;let r;i?(r=n.getNode(i),r.style.width=t+"px",r.style.height=e+"px"):(r=this.c.sandBoxDoc.body,this.c.resize(t,e));break}case i.MOUSE:{const{x:t,y:e,id:i,type:r}=o;let s=0,l=0;if(i){const t=n.getNode(i);let e={};t&&t.getBoundingClientRect&&(e=t.getBoundingClientRect());const{left:r,top:a}=e;s=r,l=a}r===a.MOVE?this.pointer.move(t+s,e+l):r===a.CLICK&&this.pointer.click(t+s,e+l);break}case i.DOM:{yield Ie();const{addedNodes:t,movedNodes:e,removedNodes:i,attrs:r,texts:a}=o;i&&i.forEach(t=>{const{parentId:e,id:i}=t,r=n.getNode(e),a=n.getNode(i);a&&r&&r.contains(a)&&r.removeChild(a)});const s=new Set,l=e&&e.slice()||[];l.forEach(t=>{t.nextId&&l.some(e=>e.id===t.nextId)&&s.add(t.nextId)});const d=l.map(t=>{const{id:e,parentId:n,nextId:i}=t;return{node:e,parentId:n,nextId:i}}).concat(t&&t.slice()||[]);if(d){const t=d.length,e=t>0?(t*t+t)/2:0;let n=0;for(;d.length;){const t=d.shift();t&&Ae(t,s)&&n++<e&&d.push(t)}}r&&r.forEach(t=>{const{id:e,key:i,value:r}=t,a=n.getNode(e);a&&Ee(a,i,r)}),a&&a.forEach(t=>{const{id:e,value:i,parentId:r}=t,a=n.getNode(r),s=n.getNode(e);if(a&&s){if(function(t){return t.ownerDocument&&!!t.ownerDocument.contains(t)}(s))return void(s.textContent=i);a.innerText=i}});break}case i.FORM_EL:{yield Ie();const{id:t,key:e,type:i,value:a,patches:s}=o,d=n.getNode(t),{mode:h}=window.G_REPLAY_OPTIONS;if(d)if(i===r.INPUT||i===r.CHANGE)if(s&&s.length){const t=(l=d.value,s.forEach(t=>{const{type:e,value:n,len:i}=t;switch(e){case"add":l=l.substring(0,t.index)+n+l.substring(t.index);break;case"rm":l=l.substring(0,t.index)+l.substring(t.index+i)}}),l);d.value=t}else e&&(d[e]=a);else if(i===r.FOCUS){if("live"===h)return;d.focus&&d.focus()}else i===r.BLUR?d.blur&&d.blur():i===r.PROP&&e&&(d[e]=a);break}case i.LOCATION:{const{path:t,hash:e,href:i,contextNodeId:r}=o,a=n.getNode(r);if(a){const n=a.ownerDocument.defaultView;n.G_REPLAY_LOCATION=Object.assign(Object.assign({},n.G_REPLAY_LOCATION),{path:t,hash:e,href:i})}break}case i.CANVAS:{yield Ie();const{src:e,id:i,strokes:r}=o,a=n.getNode(i);if(!a)return;const s=a.getContext("2d");if(e){const t=new Image;t.src=e,t.onload=function(){s.drawImage(this,0,0)}}else{!function(){t(this,void 0,void 0,(function*(){function t(t){const e=[];return t.forEach(t=>{const n=Math.floor(t.length/2);e.push(t.splice(0,n),t)}),e}for(const e of t(t([r])))for(const t of e){const{name:e,args:i}=t;Array.isArray(i)?("drawImage"===e&&(i[0]=n.getNode(i[0])),s[e].apply(s,i)):s[e]=i}}))}()}}}var l}))}function Oe(){return t(this,void 0,void 0,(function*(){const e=function(){const t=document.querySelector("#cat-start-page").querySelector(".play-btn");return t.classList.add("show"),t}();return new Promise(n=>{e.addEventListener("click",()=>t(this,void 0,void 0,(function*(){e.classList.remove("show"),yield w(500),n()})))})}))}function Re(t,e){t.open();const n=e.doctype;t.write(`<!DOCTYPE ${n.name} ${n.publicId?'PUBLIC "'+n.publicId+'"':""} ${n.systemId?'"'+n.systemId+'"':""}><html><head></head><body></body></html>`)}function ze(t,e){const n=Se(e.vNode);if(n){const i=n.querySelector("head");if(i){const t=document.createElement("style");t.innerHTML="textarea,\nbutton,\ndatalist,\nfieldset,\nform,\ninput,\nlabel,\nlegend,\nmeter,\noptgroup,\noption,\noutput,\nprogress,\nselect,\niframe {\n  pointer-events: none; }\n",i.appendChild(t)}const r=t.documentElement;n.scrollLeft=e.scrollLeft,n.scrollTop=e.scrollTop,t.replaceChild(n,r)}}function Ie(){return t(this,void 0,void 0,(function*(){return w(200)}))}var Ne=d((function(t,e){t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var n,i=t.HTMLElement||t.Element,r={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:i.prototype.scroll||o,scrollIntoView:i.prototype.scrollIntoView},a=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,s=(n=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?p.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):r.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?r.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):p.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var t=arguments[0].left,e=arguments[0].top;p.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},i.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):r.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},i.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var n=u(this),i=n.getBoundingClientRect(),a=this.getBoundingClientRect();n!==e.body?(p.call(this,n,n.scrollLeft+a.left-i.left,n.scrollTop+a.top-i.top),"fixed"!==t.getComputedStyle(n).position&&t.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):t.scrollBy({left:a.left,top:a.top,behavior:"smooth"})}else r.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function o(t,e){this.scrollLeft=t,this.scrollTop=e}function l(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(t,e){return"Y"===e?t.clientHeight+s<t.scrollHeight:"X"===e?t.clientWidth+s<t.scrollWidth:void 0}function h(e,n){var i=t.getComputedStyle(e,null)["overflow"+n];return"auto"===i||"scroll"===i}function c(t){var e=d(t,"Y")&&h(t,"Y"),n=d(t,"X")&&h(t,"X");return e||n}function u(t){for(;t!==e.body&&!1===c(t);)t=t.parentNode||t.host;return t}function f(e){var n,i,r,s=(a()-e.startTime)/468;s=s>1?1:s,n=.5*(1-Math.cos(Math.PI*s)),e.method.call(e.scrollable,i=e.startX+(e.x-e.startX)*n,r=e.startY+(e.y-e.startY)*n),i===e.x&&r===e.y||t.requestAnimationFrame(f.bind(t,e))}function p(n,i,s){var l,d,h,c,u=a();n===e.body?(l=t,d=t.scrollX||t.pageXOffset,h=t.scrollY||t.pageYOffset,c=r.scroll):(l=n,d=n.scrollLeft,h=n.scrollTop,c=o),f({scrollable:l,method:c,startTime:u,startX:d,startY:h,x:i,y:s})}}}}));class De{constructor(){this.interval=1e3,this.len=0,this.resolved=!1,this.listener=[],this.timer=null,this.observe()}clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}destroy(){this.listener.length=0}observe(){this.timer=window.setTimeout(()=>{const t=performance.getEntriesByType("resource").filter(t=>this.isMatchType(t)).length;if(t<=this.len)return performance.clearResourceTimings(),this.clearTimer(),this.resolved=!0,void(this.listener.length&&this.listener.forEach(t=>t()));this.len=t,this.observe()},this.interval)}isMatchType(t){switch(t.initiatorType){case"link":case"img":case"css":case"iframe":return!0}}ready(t){if(this.resolved)return t();this.listener.push(t)}}const Le=new class{constructor(){this.id=1,this.listenersMap=new Map}on(t,e){return this.getListenersByKey(t).set(++this.id,e),this.id}emit(t,...e){this.getListenersByKey(t).forEach(t=>{t(...e)})}once(t,e){const n=this.on(t,(...i)=>{e(...i),this.off(t,n)});return n}flush(t){this.getListenersByKey(t).clear()}destroy(){this.listenersMap.clear()}off(t,e){this.getListenersByKey(t).delete(e)}getListenersByKey(t){const e=this.listenersMap.get(t)||new Map;return this.listenersMap.set(t,e),e}};const Ce={speed:0};var Be;!function(t){t.RESET="RESET",t.SPEED="SPEED"}(Be||(Be={}));const Pe={frames:0,startTime:0,endTime:0};var Me;!function(t){t.RESET="RESET",t.PROGRESS="PROGRESS"}(Me||(Me={}));const Fe=function(t,e={}){let n=e,i={all:[]};return{unsubscribe:function(){n=t(n,{type:"RESET",data:{}}),i={all:[]}},subscribe:function(...t){let e,n="all";"string"==typeof t[0]?(n=t[0],e=t[1]):e=t[0],i[n]||(i[n]=[]),i[n].push(e)},dispatch:function(e){const r=n;if(n=t(n,e),!e)return void(i.all&&i.all.forEach(t=>t(n)));const a=function(t){const e={player:Object.keys(Be),progress:Object.keys(Me)};for(const[n,i]of Object.entries(e))if(i.includes(t))return n}(e.type);return a&&i[a]?i[a].forEach(t=>{(function t(e,n){if(null==e||null==n)return e===n;if(e.constructor!==n.constructor)return!1;if(e instanceof Function)return e===n;if(e instanceof RegExp)return e===n;if(e===n||e.valueOf()===n.valueOf())return!0;if(Array.isArray(e)&&e.length!==n.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object))return!1;if(!(n instanceof Object))return!1;const i=Object.keys(e);return Object.keys(n).every((function(t){return-1!==i.indexOf(t)}))&&i.every((function(i){return t(e[i],n[i])}))})(n[a],r[a])||t(n[a])}):void 0},getState:function(t){return t?n[t]:n}}}(function(t){const e=Object.keys(t);return function(n,i){const r={};for(let a=0;a<e.length;a++){const s=e[a],o=(0,t[s])(n[s],i);r[s]=o}return r}}({player:function(t,e){if(t||(t=Ce),!e)return t;const{type:n,data:i}=e;switch(n){case Be.RESET:return Ce;case Be.SPEED:return Object.assign(Object.assign({},t),i);default:return t}},progress:function(t,e){if(t||(t=Pe),!e)return t;const{type:n,data:i}=e;switch(n){case Me.RESET:return Pe;case Me.PROGRESS:return Object.assign(Object.assign({},t),i);default:return t}}}));var Ue;!function(t){t.PLAY="play",t.PAUSE="pause",t.STOP="stop",t.SPEED="speed",t.RESIZE="resize"}(Ue||(Ue={}));class je{constructor(t){this.c=t,this.init()}init(){this.controller=this.c.container.querySelector(".cat-keyboard"),this.playOrPauseBtn=this.c.container.querySelector(".play-or-pause"),this.exportBtn=this.c.container.querySelector(".cat-export"),this.exportBtn.addEventListener("click",this.export),this.controller.addEventListener("click",t=>{if(t.target&&"button"===t.target.type){const e=Number(t.target.getAttribute("speed"));this.dispatchPlay(e)}}),Fe.subscribe("player",t=>{t&&(this.paly(t.speed),this.setSpeed(t.speed))}),this.detectWindowIsActive()}dispatchPlay(t=0){Fe.dispatch({type:Be.SPEED,data:{speed:t}})}detectWindowIsActive(){document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.dispatchPlay()},!1)}paly(t){0!==t?(this.playOrPauseBtn.innerText="〓",this.playOrPauseBtn.setAttribute("style","letter-spacing: 1px;font-weight: bold;"),this.playOrPauseBtn.removeAttribute("speed")):(this.playOrPauseBtn.innerText="▲",this.playOrPauseBtn.removeAttribute("style"),this.playOrPauseBtn.setAttribute("speed","1"))}setSpeed(t){const e=this.c.container.querySelectorAll(".speed");[...e].forEach(t=>{t.removeAttribute("disabled")});const n=function(t){switch(t){case 100:return 2;case 10:return 1;case 1:default:return 0}}(t);n>-1&&e[n].setAttribute("disabled","")}export(){return t(this,void 0,void 0,(function*(){const e=document.getElementById("timecat"),n=document.getElementById("timecat-init"),i=[],r=document.querySelectorAll("script");function a(e){return t(this,void 0,void 0,(function*(){if(e)return e.textContent||(yield A(e.src.trim()))||e.src}))}const s=(yield a(e))||Array.from(r).map(t=>t.src).find(t=>/(timecat)(\.prod)?\.global\.js/.test(t))||Array.from(r).map(t=>t.textContent).find(t=>null==t?void 0:t.trim().startsWith("var TimeCat"))||"//cdn.jsdelivr.net/npm/timecatjs/dist/timecat.global.prod.js";i.push({name:"timecat",src:s});const o=(yield a(n))||Array.from(r).map(t=>t.textContent).find(t=>{if(t)return/new\s(TimeCat\.)?Player/.test(t)})||"new window.TimeCat.Player({autoplay: true})";i.push({name:"timecat-init",src:o});const l=window.G_REPLAY_OPTIONS;ye(Object.assign(Object.assign({},l),{scripts:i}))}))}}class He{constructor(t,e=60){this.index=0,this.fps=e,this.animate=t}start(){let t=performance.now();const e=1e3/this.fps,n=i=>{this.requestID=requestAnimationFrame(n);const r=i-t;r>=e-.1&&(t=i-r%e,this.animate(r,this.index++))};this.requestID=requestAnimationFrame(n)}stop(){cancelAnimationFrame(this.requestID)}}class Ye{constructor(t,e,n,i,r){this.speed=0,this.recordIndex=0,this.frameIndex=0,this.lastPercentage=0,this.isFirstTimePlay=!0,this.frameInterval=250,this.elapsedTime=0,this.audioOffset=500,this.curViewDiffTime=0,this.subtitlesIndex=0,this.options=t,this.c=e,this.pointer=n,this.progress=i,this.broadcaster=r,this.audioNode=new Audio,this.frames=this.calcFrames(),this.heatPoints=this.calcHeatPointsData(),this.initViewState(),this.records.length?Fe.subscribe("player",t=>{if(t){const e=t.speed,n=this.speed;this.speed=e,Le.emit(Ue.SPEED,e),e>0?(this.play(),0===n&&Le.emit(Ue.PLAY)):this.pause(),this.setProgress()}}):(window.addEventListener("record-data",this.streamHandle.bind(this)),this.options.destroyStore.add(()=>window.removeEventListener("record-data",this.streamHandle.bind(this))))}initAudio(){if(this.audioData)if(this.audioData.src)this.audioBlobUrl=location.href.split("/").slice(0,-1).join("/")+"/"+this.audioData.src;else{const t=this.audioData.bufferStrList;if(!t.length)return;const e=[];for(let n=0;n<t.length;n++){const i=we(t[n]);e.push(i)}const n=be(e,this.audioData.opts),i=URL.createObjectURL(n);this.audioBlobUrl=i}}streamHandle(t){const e=t.detail;if(b(e))return window.G_REPLAY_DATA.snapshot=e,void this.c.setViewState();this.execFrame(e)}initViewState(){const{G_REPLAY_PACKS:t}=window,e=t[0].body[0];this.records=e.records,this.audioData=e.audio,this.initAudio(),this.records.length&&(this.subtitlesIndex=0,this.broadcaster.cleanText(),this.curViewEndTime=+this.records.slice(-1)[0].time,this.curViewDiffTime=0,window.G_REPLAY_DATA=e)}switchNextView(e){return t(this,void 0,void 0,(function*(){const{G_REPLAY_DATA:t,G_REPLAY_PACKS:n}=window;if(!this.records)return;const i=function(t){var e;for(let i=0;i<n.length;i++){const r=n[i].body,a=null===(e=n[i+1])||void 0===e?void 0:e.body;for(let e=0;e<r.length;e++)if(t===r[e]){const t=r[e+1];return t||(a.length?a[0]:null)}}return null}(t);if(!i)return;const r=+this.records.slice(-1)[0].time;this.curViewDiffTime+=+i.records[0].time-r,window.G_REPLAY_DATA=i,this.records=i.records,this.audioData=i.audio,this.initAudio(),this.curViewEndTime=+this.records.slice(-1)[0].time,this.recordIndex=0,e&&(yield w(e)),this.c.setViewState()}))}play(){this.playAudio(),0===this.recordIndex&&(this.progress.resetThumb(),this.isFirstTimePlay?this.progress.drawHeatPoints(this.heatPoints):(this.initViewState(),this.c.setViewState()),this.isFirstTimePlay=!1),this.RAF&&this.RAF.requestID&&this.RAF.stop();this.RAF=new He(function(n,i){return t(this,void 0,void 0,(function*(){const t=f()-e;if(this.frameIndex>0&&!this.frames[this.frameIndex])return void this.stop();this.startTime||(this.startTime=Number(this.frames[this.frameIndex]));const n=this.startTime+t*this.speed;let r=Number(this.frames[this.frameIndex]);for(r>this.curViewEndTime-this.curViewDiffTime&&(yield this.switchNextView(300));r&&n>=r;)this.renderEachFrame(),this.frameIndex++,r=Number(this.frames[this.frameIndex]);this.elapsedTime=(n-this.frames[0])/1e3;const a=Math.floor(2/(this.frameInterval/1e3));if(this.audioNode.src&&!(this.frameIndex%a)&&!(i%a*2)){const t=200;Math.abs(1e3*(this.elapsedTime-this.audioNode.currentTime))>this.audioOffset+t&&this.syncAudioCurrentTime()}}))}.bind(this),30),this.options.destroyStore.add(()=>this.RAF.stop()),this.RAF.start();const e=f();this.startTime=0}playAudio(){this.audioData&&(this.audioBlobUrl?this.audioNode&&(this.audioNode.src&&this.audioNode.src===this.audioBlobUrl||(this.audioNode.src=this.audioBlobUrl),this.syncAudioCurrentTime(),this.speed>1?this.audioNode.pause():this.audioNode.play()):this.pauseAudio())}syncAudioCurrentTime(t=this.elapsedTime,e=this.audioOffset/1e3){this.audioNode.currentTime=t+e}pauseAudio(){this.audioNode&&this.audioNode.pause()}setProgress(){this.progress.setProgressAnimation(this.frameIndex,this.frames.length,this.frameInterval,this.speed)}renderEachFrame(){let t;for(this.progress.updateTimer((this.frameIndex+1)*this.frameInterval/1e3);this.recordIndex<this.records.length&&+(t=this.records[this.recordIndex]).time-this.curViewDiffTime<=this.frames[this.frameIndex];)this.execFrame.call(this,t),this.recordIndex++;if(this.audioData&&this.audioData.subtitles.length){const t=this.audioData.subtitles,{start:e,end:n,text:i}=t[this.subtitlesIndex],r=g(e),a=g(n);this.elapsedTime>a/1e3?(this.broadcaster.cleanText(),this.subtitlesIndex<t.length-1&&this.subtitlesIndex++):this.elapsedTime>r/1e3&&this.broadcaster.updateText(i)}}pause(){this.RAF&&this.RAF.stop(),Fe.dispatch({type:Be.SPEED,data:{speed:0}}),this.pauseAudio(),Le.emit(Ue.PAUSE)}stop(){this.speed=0,this.recordIndex=0,this.frameIndex=0,this.lastPercentage=0,this.elapsedTime=0,this.pause(),this.audioNode.currentTime=0,Le.emit(Ue.STOP)}execFrame(e){var n;return t(this,void 0,void 0,(function*(){const t=null===(n=document.querySelector("body"))||void 0===n?void 0:n.shadowRoot;if(t){const n=t.querySelector("#cat-nowtime"),i=function(t){const e=new Date(t),n=e.getFullYear(),i=e.getMonth()+1,r=e.getDate(),a=e.getHours(),s=a<10?"0"+a:a,o=e.getMinutes(),l=o<10?"0"+o:o,d=e.getSeconds();return n+"-"+i+"-"+r+" "+s+":"+l+":"+(d<10?"0"+d:d)}(Math.round(Number(e.time)));n.innerText=i}Te.call(this,e)}))}getPercentInterval(){return.08*this.speed+.2}calcFrames(t=this.frameInterval){const e=Fe.getState("progress"),{startTime:n,endTime:i}=e,r=+i,a=[];for(let e=+n;e<r;e+=t)a.push(e);return a.push(r),a}calcHeatPointsData(){const t=this.frames,{G_REPLAY_PACKS:e}=window,n=e.map(t=>t.body.map(t=>t.records)).reduce((t,e)=>t.concat(...e),[]);let i=0;return t.map(t=>{let e,r=0;for(;(e=n[i])&&+e.time<t;)i++,r++;return r})}}class Ze{constructor(t){this.x=0,this.y=0,this.c=t,this.initPointer()}initPointer(){this.pointer=this.c.container.querySelector("#cat-pointer"),this.move(0,0)}move(t,e){this.x=t,this.y=e,this.pointer.style.left=this.x+"px",this.pointer.style.top=this.y+"px"}click(e,n){return t(this,void 0,void 0,(function*(){this.move(e,n),this.pointer.hasAttribute("active")||(yield w(200),Ee(this.pointer,"active",""),yield w(400),Ee(this.pointer,"active",null))}))}}class Ge{constructor(t,e){this.options={min:1,max:100,size:3.5,maxOpacity:.8},this.target=t,this.points=e,this.draw(t.getContext("2d"),e)}initTarget(){const t=this.target,{offsetWidth:e,offsetHeight:n}=t.parentElement;t.width=e,t.height=n,t.style.width=e+"px",t.style.height=n+"px",this.yAxis=Math.floor(n/2)}draw(t,e){this.initTarget();const n=this.createCircle(this.options.size),i=n.width/2,r=n.height/2,{width:a,height:s}=t.canvas,o=a/e.length,l=Math.max.apply(null,e),d=Math.ceil(100/l),h=e.reduce((t,e,n)=>{const i=e*d,r=Math.min(1,i/this.options.max).toFixed(2);return(t[r]=t[r]||[]).push({x:o*(n+1)+this.options.size/2,val:i}),t},{});Object.keys(h).forEach(e=>{t.beginPath(),t.globalAlpha=+e,h[e].forEach(e=>{t.drawImage(n,e.x-i,this.yAxis-r)})});const c=new Ke,u=t.getImageData(0,0,a,s);this.colorize(u.data,c.getImageData()),t.clearRect(0,0,a,s),t.putImageData(u,0,0)}colorize(t,e){const n=this.options.maxOpacity;for(let i,r=3,a=t.length;r<a;r+=4)i=4*t[r],t[r]/256>n&&(t[r]=256*n),i&&i>=0&&i<=1024?(t[r-3]=e[i],t[r-2]=e[i+1],t[r-1]=e[i+2]):t[r]=0}createCircle(t){const e=t/2,n=t+e,i=1e4,r=Ve(2*n,2*n),a=r.getContext("2d");return a.shadowBlur=e,a.shadowColor="black",a.shadowOffsetX=a.shadowOffsetY=i,a.beginPath(),a.arc(n-i,n-i,t,0,2*Math.PI,!0),a.closePath(),a.fill(),r}}function Ve(t,e){const n=document.createElement("canvas");return n.width=t,n.height=e,n}class Ke{constructor(t){this.initOption(t),this.initPalette()}initOption(t){this.gradient=(t=t||{}).gradient||{.25:"rgba(0, 0, 255, 1)",.55:"rgba(0, 255, 0, 1)",.85:"rgba(255, 255, 0, 1)",1:"rgba(255, 0, 0, 1)"},this.maxSize=t.maxSize||35,this.minSize=t.minSize||0,this.max=t.max||100,this.min=t.min||0}initPalette(){const t=this.gradient,e=Ve(256,1),n=this.paletteCtx=e.getContext("2d"),i=n.createLinearGradient(0,0,256,1);Object.keys(t).forEach(e=>{i.addColorStop(parseFloat(e),t[e])}),n.fillStyle=i,n.fillRect(0,0,256,1)}getImageData(t){const e=this.paletteCtx.getImageData(0,0,256,1).data;if(void 0===t)return Array.from(e);const n=this.max,i=this.min;t>n&&(t=n),t<i&&(t=i);const r=4*Math.floor((t-i)/(n-i)*255);return[e[r],e[r+1],e[r+2],e[r+3]]}}class We{constructor(t){this.progress=t.container.querySelector(".cat-progress"),this.timer=t.container.querySelector(".cat-timer time"),this.thumb=this.progress.querySelector(".cat-thumb"),this.currentProgress=this.progress.querySelector(".cat-current-progress"),this.slider=this.progress.querySelector(".cat-slider-bar"),this.heatBar=this.progress.querySelector(".cat-heat-bar"),Le.on(Ue.RESIZE,this.resizeHeatBar.bind(this))}setProgressAnimation(e,n,i,r){return t(this,void 0,void 0,(function*(){if(!e&&!r)return;if(this.currentProgress.classList.remove("active"),yield w(20),this.currentProgress.style.removeProperty("transition"),!r)return this.currentProgress.style.width=this.currentProgress.offsetWidth+"px",void this.currentProgress.style.setProperty("transition","none");this.currentProgress.style.transitionDuration=(n-e)*i/r/1e3+"s",this.currentProgress.classList.add("active")}))}updateTimer(t){const e=function(t){t<=0&&(t=0);const[e,n,i]=[Math.floor(t/3600),Math.floor(t/60%60),Math.floor(t%60)];return[e,n,i].map(t=>t<=9?"0"+t:t).join(":").replace(/^00\:/,"")}(t);e&&(this.timer.innerHTML=e)}resetThumb(){this.currentProgress.classList.remove("active");const t=this.currentProgress.cloneNode(!0);this.currentProgress.parentNode.replaceChild(t,this.currentProgress),t.style.width="0",this.currentProgress=t}drawHeatPoints(t){this.heatPoints!==t&&(this.heatPoints=t),new Ge(this.heatBar,t)}resizeHeatBar(){return t(this,void 0,void 0,(function*(){yield w(500),this.heatPoints&&this.drawHeatPoints(this.heatPoints)}))}}class qe{constructor(t){this.c=t,this.init()}init(){this.broadcaster=this.c.container.querySelector(".cat-broadcaster"),this.floatLayer=this.broadcaster.firstElementChild,this.subtitle=this.floatLayer.firstElementChild}updateText(t){t=t.trim(),this.subtitle.innerText.trim()!==t&&(this.subtitle.innerText=t,this.floatLayer.toggleAttribute("hidden",!t))}cleanText(){this.updateText("")}}class Xe{constructor(t){this.c=t,this.options=t.options,this.initComponent()}initComponent(){this.keyboard=new je(this.c),this.progress=new We(this.c),this.pointer=new Ze(this.c),this.broadcaster=new qe(this.c),this.player=new Ye(this.options,this.c,this.pointer,this.progress,this.broadcaster)}}class Je{constructor(t){this.options=t,this.init()}init(){const t=this.options.target,e="string"==typeof t?document.querySelector(t):t;this.target=e,this.initTemplate(),this.initSandbox();const{resize:n}=this.makeItResponsive();this.resize=n,this.initPanel()}initPanel(){new Xe(this)}initSandbox(){this.sandBox=this.container.querySelector("#cat-sandbox"),this.sandBoxDoc=this.sandBox.contentDocument,this.setSmoothScroll(this.sandBox.contentWindow),Re(this.sandBoxDoc,this.getSnapshotRecord()),function(t){const e={37:1,38:1,39:1,40:1};function n(t){t.preventDefault()}function i(t){if(e[t.keyCode])return n(t),!1}let r=!1;try{t.addEventListener("test",()=>{},Object.defineProperty({},"passive",{get:function(){r=!0}}))}catch(t){}const a=!!r&&{passive:!1},s="onwheel"in document.createElement("div")?"wheel":"mousewheel";t.addEventListener("DOMMouseScroll",n,!1),t.addEventListener(s,n,a),t.addEventListener("touchmove",n,a),t.addEventListener("keydown",i,!1)}(this.sandBox.contentWindow.document),this.setViewState()}getSnapshotRecord(){return window.G_REPLAY_DATA.snapshot.data}setSmoothScroll(t){Ne.polyfill(),t.HTMLElement.prototype.scroll=window.scroll,t.HTMLElement.prototype.scrollTo=window.scrollTo}setViewState(){n.reset(),ze(this.sandBoxDoc,this.getSnapshotRecord())}initTemplate(){const t=(this.target instanceof Window?this.target.document.body:this.target).attachShadow({mode:"open"});t.appendChild(this.createStyle("cat-css","body {\n  margin: 0;\n  background-color: #e2e2e2;\n  overflow: hidden; }\n\n#cat-nowtime {\n  position: absolute;\n  right: 8px;\n  top: 5px;\n  color: #9FC865;\n  font-size: 14px;\n  z-index: 3; }\n\n#cat-main {\n  box-shadow: 0 2px 3px rgba(26, 26, 26, 0.1);\n  transition: all .5s;\n  -webkit-transition: all .5s;\n  opacity: 0;\n  position: relative;\n  overflow: visible; }\n\n#cat-sandbox {\n  background: white;\n  vertical-align: top;\n  border: 0;\n  width: 100%;\n  height: 100%; }\n\n#cat-player {\n  position: relative;\n  width: inherit;\n  height: inherit; }\n\n#cat-pointer {\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  transition: all .2s; }\n  #cat-pointer img {\n    width: 15px;\n    position: absolute;\n    z-index: 100;\n    top: -5px;\n    left: -3px; }\n  #cat-pointer[active] .spinner {\n    width: 32px;\n    height: 32px;\n    left: -17px;\n    top: -18px;\n    position: absolute;\n    background-color: #333;\n    border-radius: 100%;\n    -webkit-animation: spinner-scale .4s 1 ease-in-out;\n    animation: spinner-scale .4s 1 ease-in-out; }\n\n@-webkit-keyframes spinner-scale {\n  0% {\n    -webkit-transform: scale(0); }\n  100% {\n    -webkit-transform: scale(1);\n    opacity: 0.2; } }\n\n@keyframes spinner-scale {\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0); }\n  100% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n    opacity: 0.2; } }\n\n#cat-container {\n  background: grey; }\n\n#cat-panel {\n  width: 100%;\n  box-sizing: border-box;\n  padding: 10px;\n  height: 40px;\n  position: absolute;\n  left: 0;\n  bottom: -41px;\n  background: #535253;\n  opacity: 0.9;\n  display: flex; }\n\n.cat-broadcaster {\n  position: absolute;\n  width: 100%;\n  left: 0;\n  bottom: 50px;\n  display: flex;\n  justify-content: center; }\n  .cat-broadcaster .float-layer {\n    margin: 0 10px;\n    line-height: 20px;\n    color: #fff;\n    background-color: rgba(0, 0, 0, 0.6);\n    border-radius: 2px;\n    padding: 5px;\n    box-shadow: 0px 0px 2px rgba(26, 26, 26, 0.5);\n    text-align: center; }\n    .cat-broadcaster .float-layer[hidden] {\n      display: none; }\n\n.cat-keyboard {\n  height: 20px;\n  white-space: nowrap; }\n  .cat-keyboard button[disabled] {\n    cursor: default;\n    color: #999; }\n\n.cat-export button,\n.cat-keyboard button {\n  border: none;\n  background: none;\n  color: white;\n  outline: none;\n  cursor: pointer;\n  font-size: 13px;\n  padding: 0 5px; }\n  .cat-export button.play-or-pause,\n  .cat-keyboard button.play-or-pause {\n    padding: 0;\n    text-indent: 1px;\n    transform: rotate(90deg);\n    width: 18px; }\n\n.cat-export,\n.cat-progress,\n.cat-keyboard,\n.cat-timer {\n  display: flex;\n  align-items: center; }\n\n.cat-timer {\n  margin-left: 2px; }\n  .cat-timer time {\n    margin-top: 1px;\n    padding: 0 4px;\n    color: white;\n    font-size: 12px;\n    font-family: Helvetica;\n    vertical-align: middle; }\n\n.cat-export button {\n  padding: 0;\n  padding-left: 2px; }\n\n.cat-progress {\n  width: 100%;\n  height: 20px; }\n\n.cat-slider-bar {\n  position: relative;\n  width: calc(100% - 20px);\n  height: 7px;\n  margin: 7.5px 8px;\n  background: white;\n  border-radius: 2.5px; }\n\n.cat-heat-bar-container {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  overflow: hidden; }\n\n.cat-heat-bar {\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.cat-thumb {\n  width: 14px;\n  height: 14px;\n  box-sizing: border-box;\n  border: 2px solid white;\n  background: black;\n  border-radius: 100%;\n  cursor: pointer;\n  position: absolute;\n  right: -5px;\n  top: -4px;\n  z-index: 10; }\n\n.cat-current-progress {\n  background: rgba(50, 50, 50, 0.75);\n  border-radius: 2.5px;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 100%;\n  transition-property: width;\n  transition-timing-function: linear;\n  transition-duration: 0s; }\n  .cat-current-progress.active {\n    width: 100% !important; }\n\n#cat-start-page {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: calc(100% + 42px);\n  -webkit-backdrop-filter: blur(1.5px);\n  backdrop-filter: blur(1.5px);\n  transition: .5s all;\n  cursor: pointer; }\n  #cat-start-page .play-btn {\n    position: absolute;\n    margin: auto;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    width: 100px;\n    height: 100px;\n    transition: all .5s;\n    transform: scale(0);\n    opacity: 0; }\n    #cat-start-page .play-btn.show {\n      transform: scale(1);\n      opacity: 1; }\n")),t.appendChild(this.createContainer("cat-main",'<div id="cat-container">\n    <div id="cat-nowtime"></div>\n    <div id="cat-player">\n        <iframe id="cat-sandbox" sandbox="allow-same-origin allow-scripts allow-popups"></iframe>\n    </div>\n    <div id="cat-panel">\n\n        <div class="cat-broadcaster">\n            <div class="float-layer" hidden>\n                <span class="subtitle"></span>\n            </div>\n        </div>\n\n        <div class="cat-keyboard">\n            <button class="play-or-pause" type="button" speed="1">▲</button>\n            <button type="button" class="speed" disabled speed="1">1x</button>\n            <button type="button" class="speed" speed="10">10x</button>\n            <button type="button" class="speed" speed="100">100x</button>\n        </div>\n        <div class="cat-timer">\n            <time>\n                00:00\n            </time>\n        </div>\n        <div class="cat-progress">\n            <div class="cat-slider-bar">\n                <div class="cat-heat-bar-container"><canvas class="cat-heat-bar"></canvas></div>\n                <div class="cat-current-progress">\n                    <div class="cat-thumb"></div>\n                </div>\n            </div>\n        </div>\n        <div class="cat-export">\n            <button type="button">\n                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"\n                    y="0px" width="16px" height="15px" viewBox="0 0 511.994 511.994"\n                    style="enable-background:new 0 0 511.994 511.994;" xml:space="preserve">\n                    <path style="fill:#fff;" d="M403.079,310.458c-3.627-7.232-11.008-11.797-19.093-11.797h-64v-85.333c0-11.776-9.536-21.333-21.333-21.333H213.32\n\t\t\tc-11.776,0-21.333,9.557-21.333,21.333v85.333h-64c-8.064,0-15.445,4.565-19.072,11.797c-3.605,7.232-2.837,15.872,2.027,22.336\n\t\t\tl128,170.667c4.011,5.376,10.347,8.533,17.045,8.533c6.72,0,13.056-3.157,17.067-8.533l128-170.667\n            C405.917,326.33,406.685,317.69,403.079,310.458z" />\n                    <path style="fill:#fff;" d="M298.663,128.001H213.33c-11.797,0-21.333,9.536-21.333,21.333c0,11.797,9.536,21.333,21.333,21.333h85.333\n                        c11.797,0,21.333-9.536,21.333-21.333C319.996,137.537,310.46,128.001,298.663,128.001z" />\n                    <path style="fill:#fff;" d="M298.663,64.001H213.33c-11.797,0-21.333,9.536-21.333,21.333s9.536,21.333,21.333,21.333h85.333\n                        c11.797,0,21.333-9.536,21.333-21.333S310.46,64.001,298.663,64.001z" />\n                </svg>\n\n            </button>\n        </div>\n    </div>\n    <div id="cat-start-page" style="display: none;">\n        <div class="play-btn">\n            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                x="0px" y="0px" viewBox="0 0 142.448 142.448" style="enable-background:new 0 0 142.448 142.448;"\n                xml:space="preserve">\n                <g>\n                    <path style="fill:#bbb;" d="M142.411,68.9C141.216,31.48,110.968,1.233,73.549,0.038c-20.361-0.646-39.41,7.104-53.488,21.639\n\t\tC6.527,35.65-0.584,54.071,0.038,73.549c1.194,37.419,31.442,67.667,68.861,68.861c0.779,0.025,1.551,0.037,2.325,0.037\n\t\tc19.454,0,37.624-7.698,51.163-21.676C135.921,106.799,143.033,88.377,142.411,68.9z M111.613,110.336\n\t\tc-10.688,11.035-25.032,17.112-40.389,17.112c-0.614,0-1.228-0.01-1.847-0.029c-29.532-0.943-53.404-24.815-54.348-54.348\n\t\tc-0.491-15.382,5.122-29.928,15.806-40.958c10.688-11.035,25.032-17.112,40.389-17.112c0.614,0,1.228,0.01,1.847,0.029\n\t\tc29.532,0.943,53.404,24.815,54.348,54.348C127.91,84.76,122.296,99.306,111.613,110.336z" />\n                    <path style="fill:#bbb;" d="M94.585,67.086L63.001,44.44c-3.369-2.416-8.059-0.008-8.059,4.138v45.293\n\t\tc0,4.146,4.69,6.554,8.059,4.138l31.583-22.647C97.418,73.331,97.418,69.118,94.585,67.086z" />\n                </g>\n            </svg>\n        </div>\n    </div>\n    <div id="cat-pointer">\n        <img src="data:image/png;base64,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"\n            alt="pointer">\n        <div class="spinner"></div>\n    </div>\n</div>\n'))}createContainer(t,e){const n=(new DOMParser).parseFromString(e,"text/html").body.firstChild;return n.id=t,n.style.width=this.getSnapshotRecord().width+"px",n.style.height=this.getSnapshotRecord().height+"px",n.style.display="none",this.container=n}makeItResponsive(){const e=this,n=function(t,e,n={isImmediate:!1}){let i;return function(...r){const a=this,s=n.isImmediate&&void 0===i;void 0!==i&&clearTimeout(i),i=setTimeout((function(){i=void 0,n.isImmediate||t.apply(a,r)}),e),s&&t.apply(a,r)}}(a,500),i=()=>n({target:e.target});function r(t,n){a({target:e.target},t,n)}function a(n,i,r){return t(this,void 0,void 0,(function*(){if(n){if(n.target instanceof Window){const{innerWidth:t,innerHeight:a}=n.target;s(e.container,t,a,i,r)}else{const{offsetWidth:t,offsetHeight:a}=n.target;s(e.container,t,a,i,r)}Le.emit(Ue.RESIZE)}}))}function s(t,e,n,i,r){const{mode:a}=window.G_REPLAY_OPTIONS||{},s="live"===a?0:38,{width:o,height:l}=function(t){return{width:parseInt(t.style.width,10),height:parseInt(t.style.height,10)}}(t),d=e/(i||o),h=n/((r||l)+s),c=Math.min(d>h?h:d,1),u=((i||o)*c-(i||o))/2+(e-(i||o)*c)/2,f=(n-(r||l)-s*c)/2;t.style.transform=`scale(${c})`,t.style.left=u+"px",t.style.top=f+"px",i&&(t.style.width=i+"px"),r&&(t.style.height=r+"px")}return window.addEventListener("resize",i,!0),this.options.destroyStore.add(()=>window.removeEventListener("resize",i,!0)),r(),setTimeout(()=>this.container.style.opacity="1"),this.container.style.display="block",{resize:r}}createStyle(t,e){const n=document.createElement("style");return n.id=t,n.innerHTML=e,n}}const Qe={autoplay:!0,mode:"default",target:window};class $e{constructor(t){this.destroyStore=new Set,n.reset(),this.init(t)}init(e){return t(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({destroyStore:this.destroyStore},Qe),e);window.G_REPLAY_OPTIONS=n,this.destroyStore.add(()=>Fe.unsubscribe());const i=yield this.getReplayData(n);if(!i||!i.length)return;const{records:r,audio:a}=window.G_REPLAY_DATA=this.getFirstReplayData(i),s=a&&(a.src||a.bufferStrList.length);if(r.length){const t=r[0].time,e=i.reduce((t,e)=>t+e.body.map(t=>t.records).reduce((t,e)=>t+(+e.slice(-1)[0].time-+e[0].time),0),0)+ +t;Fe.dispatch({type:Me.PROGRESS,data:{frames:r.length,startTime:Number(t),endTime:e}})}const o=new Je(n);if(function(t){t.container.querySelector("#cat-start-page").setAttribute("style","")}(o),this.fmp=new De,this.fmp.ready(()=>t(this,void 0,void 0,(function*(){s&&(yield Oe()),function(t){var e;const n=t.container.querySelector("#cat-start-page");null===(e=null==n?void 0:n.parentElement)||void 0===e||e.removeChild(n)}(o),r.length&&(n.autoplay||s)&&Fe.dispatch({type:Be.SPEED,data:{speed:1}})}))),!r.length){const t=document.querySelector("#cat-panel");t&&t.setAttribute("style","display: none")}}))}getFirstReplayData(t){return t[0].body[0]}getGZipData(){const t=window.G_REPLAY_STR_PACKS;if(!t)return null;const e=[],n=t.split("");for(let t=0;t<n.length;t++){const i=n[t].charCodeAt(0);e.push(i>=300?i-300:i)}const i=ge.ungzip(e,{to:"string"});return JSON.parse(i)}dispatchEvent(t,e){const n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)}dataReceiver(e){return t(this,void 0,void 0,(function*(){let t,n;const r=[],a=this;return yield new Promise(s=>{e(e=>{if(t)this.dispatchEvent("record-data",e);else{if(!e)return;if(e.type===i.HEAD)n=e.data;else{if(!e||!b(e))return;n&&r&&(r.push({snapshot:e,records:[],audio:{src:"",bufferStrList:[],subtitles:[],opts:{}}}),t={head:n,body:r},s([t]),a.fmp&&a.fmp.observe())}}})})}))}getDataFromDB(){return t(this,void 0,void 0,(function*(){const t=yield l,e=yield t.readAllRecords();return e?_(e):null}))}getReplayData(e){return t(this,void 0,void 0,(function*(){const{receiver:t,packs:n,records:i}=e,r=i&&_(i)||n||t&&(yield this.dataReceiver(t))||this.getGZipData()||(yield this.getDataFromDB())||window.G_REPLAY_PACKS;if(!r)throw u("Replay data not found");const a=this.decodePacks(r);return a?(window.G_REPLAY_PACKS=a,a):null}))}decodePacks(t){const{atob:e}=c;return t.forEach(t=>{t.body.forEach(t=>{const{records:n,snapshot:i}=t;i.time=i.time.length<8?e.call(c,i.time)+"":i.time,n.forEach(t=>{t.time=t.time.length<8?e.call(c,t.time)+"":t.time})})}),t}destroy(){this.destroyStore.forEach(t=>t()),Le.destroy()}on(t,e){Le.on(t,e)}}export{$e as Player};
//# sourceMappingURL=player.esm.prod.js.map
